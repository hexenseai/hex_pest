{% extends 'unfold/layouts/unauthenticated.html' %}

{% load i18n static unfold %}

{% block extrastyle %}
    {{ block.super }}
    {{ form.media }}
{% endblock %}

{% block title %}
    {{ title }} | {{ site_title }}
{% endblock %}

{% block content %}
    <div class="text-center mb-8">
        {% if site_logo %}
            <div class="flex justify-center mb-4">
                {% if site_logo.light and site_logo.dark %}
                    <img src="{{ site_logo.dark }}" alt="" class="h-16 w-auto hidden dark:block drop-shadow-sm"/>
                    <img src="{{ site_logo.light }}" alt="" class="h-16 w-auto block dark:hidden drop-shadow-sm" />
                {% else %}
                    <img src="{{ site_logo }}" alt="" class="h-16 w-auto drop-shadow-sm" />
                {% endif %}
            </div>
        {% endif %}
        <h1 class="text-2xl font-bold uppercase tracking-wide text-primary-700 dark:text-primary-400 mb-1">
            Kale İlaçlama
        </h1>
        <p class="text-sm font-medium uppercase tracking-[0.25em] text-base-font-muted-light dark:text-base-font-muted-dark">
            Yönetim Paneli
        </p>
    </div>

    <div class="rounded-xl border border-base-200 dark:border-base-700 bg-base-100/80 dark:bg-base-800/80 shadow-sm p-6 mb-6">
        {% include "unfold/helpers/messages.html" %}

        {% if form.errors or form.non_field_errors %}
            <div class="flex flex-col gap-4 mb-6 *:mb-0">
                {% include "unfold/helpers/messages/errornote.html" with errors=form.errors %}
                {% include "unfold/helpers/messages/error.html" with errors=form.non_field_errors %}
                {% if user.is_authenticated %}
                    {% blocktranslate trimmed asvar message %}
                        You are authenticated as {{ username }}, but are not authorized to
                        access this page. Would you like to login to a different account?
                    {% endblocktranslate %}
                    {% include "unfold/helpers/messages/error.html" with error=message %}
                {% endif %}
            </div>
        {% endif %}

        {% block login_before %}{% endblock %}

        <form action="{{ app_path }}" method="post" id="login-form">
            {% csrf_token %}

            {% include "unfold/helpers/field.html" with field=form.username %}

            {% include "unfold/helpers/field.html" with field=form.password %}

            <div class="flex flex-col gap-3 mt-6">
                {% component "unfold/components/button.html" with submit=1 variant="primary" class="submit-row w-full" %}
                    {% translate 'Log in' %} <span class="material-symbols-outlined relative right-0 transition-all group-hover:-right-1 text-sm">arrow_forward</span>
                {% endcomponent %}

                {% url 'admin_password_reset' as password_reset_url %}
                {% url 'admin:admin_password_reset' as unfold_password_reset_url %}

                {% if password_reset_url or unfold_password_reset_url %}
                    {% component "unfold/components/button.html" with href=password_reset_url|default:unfold_password_reset_url variant="secondary" class="password-reset-link w-full" %}
                        {% translate 'Forgotten your password or username?' %}
                    {% endcomponent %}
                {% endif %}
            </div>
        </form>

        {% block login_after %}{% endblock %}
    </div>
{% endblock %}
